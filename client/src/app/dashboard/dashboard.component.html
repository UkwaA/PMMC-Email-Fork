<div *ngIf = "role == '2' || role == '3'" class="container">
    <div class="row text-center">
        <div class="col-lg-7 mt-5 mx-auto">
            <h1>Dashboard</h1>
        </div>
    </div> 
    <div class="row">
        <div class="col-sm-12">
            <kendo-daterange class = "float-right p-3">
                <label>
                    <span class="label p-3">Start</span>
                    <kendo-dateinput kendoDateRangeStartInput 
                    [(value)]="range.start"
                    (valueChange)="onChangeDate($event)"></kendo-dateinput>
                </label>
                <label>
                    <span class="label p-3">End</span>
                    <kendo-dateinput kendoDateRangeEndInput 
                    [(value)]="range.end"
                    (valueChange)="onChangeDate($event)"></kendo-dateinput>
                </label>
            </kendo-daterange>
        </div>
        <div class="col-sm-12 col-md-6 col-xl-3">
            <div class="card bg-c-green order-card h-100">
                <div class="card-body">
                    <h6 class="m-b-20">Completed Reservations</h6>
                    <h5 class="text-right">Reservations: {{completedRes}}</h5>
                    <h5 class="text-right">Total: ${{completedTotal}}</h5>
                </div>
                <div class="card-footer bg-g-white">
                    View Completed Reservations
                </div>
            </div>
        </div>
        
        <div class="col-sm-12 col-md-6 col-xl-3">
            <div class="card bg-c-blue order-card h-100">
                <div class="card-body">
                    <h6 class="m-b-20">Ongoing Reservations</h6>
                    <h5 class="text-right">Reservations: {{ongoingRes}}</h5>
                    <h5 class="text-right">Total: ${{ongoingTotal}}</h5>
                </div>
                <div class="card-footer bg-b-white">
                    <button class="link" (click)="openReservationModal()" onfocus="blur()">View Ongoing Reservations</button> 
                </div>
            </div>
        </div>
        
        <div class="col-sm-12 col-md-6 col-xl-3">
            <div class="card bg-c-yellow order-card h-100">
                <div class="card-body">
                    <h6 class="m-b-20">Attended Reservations</h6>
                    <h5 class="text-right">Reservations: {{attendedRes}}</h5>
                    <h5 class="text-right">Total: ${{attendedTotal}}</h5>
                </div>
                <div class="card-footer bg-y-white">
                    View Attended Reservations
                </div>
            </div>
        </div>
        
        <div class="col-sm-12 col-md-6 col-xl-3">
            <div class="card bg-c-pink order-card h-100">
                <div class="card-body">
                    <h6 class="m-b-20"> Cancelled Reservations </h6>
                    <h5 class="text-right">Reservations: {{cancelledRes}}</h5>
                    <h5 class="text-right">Total: ${{cancelledTotal}}</h5>
                </div>
                <div class="card-footer bg-p-white">
                    View Canceled Reservations
                </div>
            </div>
        </div>
        
    </div>
    <!-- CHART USING NG2-CHARTS -->
    <!-- <div>
        <h2>{{title}}</h2>
        <canvas
            baseChart
            [chartType]="'bar'"
            [datasets]="chartData"
            [labels]="labels"
            [options]="chartOptions"
            [legend]="true"
            [colors]="colors"
            (chartClick)="onChartClick($event)">
        </canvas>
    </div>
    
    <br/>

    <div>
        <h2>PIE CHART EXAMPLE</h2>
        <canvas 
            baseChart 
            [data]="pieChartData" 
            [labels]="pieChartLabels" 
            [chartType]="'pie'"
            [options]="pieChartOptions"
            [legend]="true"
            [plugins]= "pieChartPlugins">
        </canvas>
    </div>
    
    <h3 class = "text-muted"> Lastest Reservations </h3> -->
    <!-- SEARCH BAR -->
    <div class="row filter">
        <div class="col-lg-2 col-md-2 col-sm-3 p-0">
            <select class="form-control" style="font-weight: bold" id="programCat"
                (change)="selectChangeHandler($event)">
            </select>
        </div>
        <div class="col-lg-8 col-md-8 col-sm-7 pr-0">
            <input type="text" class="form-control" placeholder="Type in Program Name or Keywords to Search"
                [(ngModel)]="searchText">
        </div>
        <div class="col-lg-2 col-md-2 col-sm-2">
            <button mat-raised-button color="primary" (click)="clearSearch()" onfocus="blur()">Clear Search</button>
        </div>
    </div>
    <!-- TABLE -->
    <div class="table-responsive-sm hide-with-small">
        <table #datatable class="table table-hover" style="width:100%">
            <thead>
                <tr>
                    <th style="width:10%"> #Res </th>
                    <th style="width:15%"> Program Name </th>
                    <th style="width:12.5%"> Date </th>
                    <th style="width:12.5%"> Status </th>
                    <th style="width:12.5%"> First Name </th>
                    <th style="width:12.5%"> Last Name </th>
                    <th style="width:12.5%"> Email </th>
                    <th style="width:12.5%"> Phone </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td> G2467 </td>
                    <td> Change the Life of a Seal </td>
                    <td> April 20, 2020</td>
                    <td> Pending </td>
                    <td> Alice </td>
                    <td> Nguyen </td>
                    <td> alice@gmail.com </td>
                    <td> 7149999999 </td>
                </tr>
                <tr>
                    <td> I1234 </td>
                    <td> Camp Pinniped </td>
                    <td> June 20, 2020</td>
                    <td> Completed </td>
                    <td> Brian </td>
                    <td> Pham </td>
                    <td> brian@gmail.com </td>
                    <td> 7141111111 </td>
                </tr>
                <tr>
                    <td> R1234 </td>
                    <td> Pinniped Pollution Project </td>
                    <td> May 10, 2020</td>
                    <td> Request </td>
                    <td> Anna </td>
                    <td> Tran </td>
                    <td> anna@gmail.com </td>
                    <td> 714222222 </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div *ngIf = "role == '1'" class="container">
    <div class="row text-center">
        <div class="col-lg-7 mt-5 mx-auto">
            <h1> Dashboard </h1>
        </div>
    </div> 
    <h3 class = "text-muted"> Recent reservations</h3>
    <div class="row pb-5" *ngFor="let res of customerRes">
        <div class="col-lg-12 mx-auto p-3">
            <!-- List group-->
            <ul [ngClass]="res.RemainingBalance == 0 ? 'completed-layout': 'waiting-layout'" class="list-group shadow">
                <!-- list group item-->
                <li class="list-group-item">
                    <div class="row p-3">
                        <div class="col-md-4">
                            <h4> {{res.ProgramName}} </h4>
                        </div>
                        <div class="col-md-5">
                            <h4 *ngIf = "res.RemainingBalance == 0"><sup class = "completed"> Payment Completed </sup> </h4>
                            <h4 *ngIf = "res.RemainingBalance != 0"><sup class = "waiting"> Payment Not Completed </sup></h4>
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-outline-danger float-right" type="submit" onfocus="blur()">Cancel Reservation</button>
                        </div>
                    </div>
                    <div class="table-responsive-sm">
                        <table class="table table-borderless" style="width:100%">
                            <thead>
                                <tr>
                                    <th style="width:10%"> #Res </th>
                                    <th style="width:20%"> Date </th>
                                    <th style="width:15%"> Time </th>
                                    <th style="width:15%"> Quantity </th>
                                    <th style="width:15%"> Total </th>
                                    <th style="width:25%"> Remaining Balance</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td> {{res.ReservationPK}} </td>
                                    <td> {{res.Date}}</td>
                                    <td> {{res.Time}}</td>
                                    <td> {{res.Quantity}} </td>
                                    <td> {{res.Total}} </td>
                                    <td> {{res.RemainingBalance}}  
                                        <button mat-raised-button *ngIf = "res.RemainingBalance != 0" class="btn btn-warning float-right" type="submit" (click)="openPaynowModal()" onfocus="blur()">Pay Now</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </li> <!-- End -->
            </ul> <!-- End -->
        </div>
    </div>
</div>
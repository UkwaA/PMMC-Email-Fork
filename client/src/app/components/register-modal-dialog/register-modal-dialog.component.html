<div id="modal-content-wrapper">
    <header id="modal-header">
        <button type="button" class="close" (click)="closeModal()" onfocus="blur()">X</button>
        <h1 id="modal-title">{{modalData.title}}</h1>
    </header>
    <mat-divider></mat-divider>
    <section id="modal-body" style="padding-bottom:0px;overflow-y:auto!important; max-height:500px; max-width:700px;overflow-x:hidden">
        <div class="formerrors" style="color:red;">{{errorMessage}}</div>
        <form>
        <div class="registration row" [formGroup]="newUserForm">
            <div class="col-sm-5">
                <h5>Account Info</h5>
                <hr>
                <div class="form-group">
                    <label for="formUsername">Username</label>
                    <input type="text" class="form-control" id="formUsername" formControlName="username"
                    [ngClass]="{ 'is-invalid': submitted && f.username.errors }">
                    <div *ngIf="submitted && f.username.errors" class="invalid-feedback">
                        <div *ngIf="submitted && f.username.errors.required">Username is required</div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="formEmail">Email</label>
                    <input type="text" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,63}$" class="form-control" id="formEmail" formControlName="email"
                    [ngClass]="{ 'is-invalid': submitted && f.email.errors }">
                    <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
                        <div *ngIf="submitted && f.email.errors.required">Email is required</div>
                        <div *ngIf="submitted && f.email.errors.pattern">Please enter a valid email</div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="formPassword">Password</label>
                    <input type="password" class="form-control" id="formPassword" formControlName="password"
                    [ngClass]="{ 'is-invalid': submitted && f.password.errors }">
                    <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
                        <div *ngIf="submitted && f.password.errors.required">Password is required</div>
                        <div *ngIf="submitted && f.password.errors.minlength">Password must be at least 6 characters long</div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="formConfirmPassword">Confirm Password</label>
                    <input type="password" class="form-control" id="formConfirmPassword" formControlName="confirmPassword"
                    [ngClass]="{ 'is-invalid': submitted && (this.f.confirmPassword.value != this.f.password.value) }">
                    <div *ngIf="submitted && (this.f.confirmPassword.value != this.f.password.value)" class="invalid-feedback">
                        The passwords must match
                    </div>
                </div>
            </div>
            <div class="col-sm-7">
                <h5>Personal Info</h5>
                <hr>
                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="formFirstName">First Name</label>
                        <input type="text" class="form-control" id="formFirstName" formControlName="FirstName"
                        [ngClass]="{ 'is-invalid': submitted && f.FirstName.errors }">
                        <div *ngIf="submitted && f.FirstName.errors" class="invalid-feedback">
                            <div *ngIf="submitted && f.FirstName.errors.required">First Name is required</div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <label for="formLastName">Last Name</label>
                        <input type="text" class="form-control" id="formLastName" formControlName="LastName"
                        [ngClass]="{ 'is-invalid': submitted && f.LastName.errors }">
                        <div *ngIf="submitted && f.LastName.errors" class="invalid-feedback">
                            <div *ngIf="submitted && f.LastName.errors.required">Last Name is required</div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="formPhoneNo">Phone Number</label>
                    <input type="number" class="form-control" id="formPhoneNo" maxlength="10" formControlName="PhoneNo"
                    oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                    [ngClass]="{ 'is-invalid': submitted && f.PhoneNo.errors }">
                    <div *ngIf="submitted && f.PhoneNo.errors" class="invalid-feedback">
                        <div *ngIf="submitted && f.PhoneNo.errors.required">Phone Number is required</div>
                        <div *ngIf="submitted && f.PhoneNo.errors.min">Please enter a valid phone number</div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="formAddress">Address</label>
                    <input type="text" class="form-control" id="formAddress" formControlName="Address"
                    [ngClass]="{ 'is-invalid': submitted && f.Address.errors }">
                    <div *ngIf="submitted && f.Address.errors" class="invalid-feedback">
                        <div *ngIf="submitted && f.Address.errors.required">Address is required</div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col-sm-7">
                        <label for="formCity">City</label>
                        <input type="text" class="form-control" id="formCity" formControlName="City"
                        [ngClass]="{ 'is-invalid': submitted && f.City.errors }">
                    </div>
                    <div class="col-sm-2">
                        <label for="formState">State</label>
                        <input type="text" class="state form-control" id="formState" maxLength="2" formControlName="State"
                        style="text-transform:uppercase;" onkeypress='return ((event.charCode >= 65 && event.charCode <= 90) || (event.charCode >= 97 && event.charCode <= 122))'
                        [ngClass]="{ 'is-invalid': submitted && f.State.errors }">
                    </div>
                    <div class="col-sm-3">
                        <label for="formZipCode">Zip Code</label>
                        <input type="number" class="form-control" id="formZipCode" maxlength="5" formControlName="Zipcode"
                        oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                        [ngClass]="{ 'is-invalid': submitted && f.Zipcode.errors }">
                    </div>
                    <div *ngIf="submitted && (f.City.errors || f.State.errors || f.Zipcode.errors)" 
                        class="col-sm-12" style="color:red">
                        <small>Please enter a valid location</small>
                    </div>
                </div>
                <div class="form-group row mt-3" style="padding-left:15px;">
                    <section class="options-section">
                        <mat-checkbox class="options-margin" formControlName="Subscribe"
                        [(ngModel)]="subscribeChecked">Subscribe to Email</mat-checkbox>
                    </section>
                </div>

            </div>

        </div>
        </form>
    </section>
    <mat-divider></mat-divider>
    <footer id="modal-footer">
        <button mat-raised-button id="modal-action-button" (click)="onSubmit()" onfocus="blur()">
            Sign Up
        </button>
        <button *ngIf = "modalData.numberOfButton == '2'" mat-raised-button id="modal-cancel-button" (click)="closeModal()" onfocus="blur()">
            Cancel
        </button>
    </footer>
</div>